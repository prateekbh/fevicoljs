!function(a,b){"use strict";var c={version:"v1.0-beta",settings:{viewTag:".app-body",maxPageTransitionTime:200,enablePageTransitions:!1,listenPopState:!0}},d={flux:{}},e=["UCBrowser","Opera Mini"],f={BROWSER_SUPPORT:"A"};!function(a){function b(){var a=!1,b="animation",c="",d="Webkit Moz O ms Khtml".split(" "),e="",f=$("body")[0];if(void 0!==f.style.animationName&&(a=!0),a===!1)for(var g=0;g<d.length;g++)if(void 0!==f.style[d[g]+"AnimationName"]){e=d[g],b=e+"Animation",c="-"+e.toLowerCase()+"-",a=!0;break}return a}function d(){for(var a=0;e>a;a++){var b=e[a];if(-1!==navigator.userAgent.indexOf(b))return!0}return!1}function f(a){for(var b=a.target,d=0;b&&4>d;){if("A"===b.tagName){a.preventDefault();var e="mounting",f="unmount";b.getAttribute("data-pageentereffect")&&(e=b.getAttribute("data-pageentereffect").trim()),b.getAttribute("data-pageleaveeffect")&&(f=b.getAttribute("data-pageleaveeffect").trim()),c.loc(b.getAttribute("href"),e,f);break}b=b.parentNode,d+=1}}function g(a){var b=document.createEvent("CustomEvent");return b.initEvent(a),b}a.capabilities={testAnimationCapability:b,isBrowserSemiSupported:d,handleClick:f,createEvent:g}}(d),function(a){a.$=function(a,b){return document.querySelectorAll(a,b)}}(a),function(a){var b=function(){var a=this,b={};a.on=function(a,c,d){if(!(arguments.length<2||"string"!=typeof a||"function"!=typeof c)){var e=c.toString();"undefined"!=typeof b[a]?"boolean"==typeof d?b[a].callbacks[e].once=d:b[a].callbacks[e]={cb:c,once:!!d}:(b[a]={callbacks:{}},b[a].callbacks[e]={cb:c,once:!!d})}},a.once=function(b,c){a.on(b,c,!0)},a.off=function(a,c){if("string"==typeof a&&"undefined"!=typeof b[a])if("function"==typeof c){var d=c.toString(),e=b[a].callbacks[d];"undefined"!=typeof e&&delete b[a].callbacks[d]}else delete b[a]},a.trigger=function(c,d){if("string"==typeof c&&"undefined"!=typeof b[c])for(var e in b[c].callbacks){var f=b[c].callbacks[e];"function"==typeof f.cb&&f.cb(d),"boolean"==typeof f.once&&f.once===!0&&a.off(c,f.cb)}}};a.PB=b,a.Dispatcher=new b}(d),function(a){function b(){this._successCallbacks=[],this._errorCallbacks=[]}function c(a,b,c,d){c.push(function(){var c=a.apply(b,arguments);c&&"function"==typeof c.then&&c.then(d.done,d)})}b.prototype.then=function(a,d){var e;return this._isdone?e=a.apply(d,this.result):(e=new b,c(a,d,this._successCallbacks,e)),this},b.prototype["catch"]=function(a,d){var e;return this._isdone&&this._isfailure?e=a.apply(d,this.result):(e=new b,c(a,d,this._errorCallbacks,e)),this},b.prototype.resolve=function(){this.result=arguments,this._isdone=!0,this._issuccess=!0;for(var a=0;a<this._successCallbacks.length;a++)this._successCallbacks[a].apply(null,arguments);this._successCallbacks=[]},b.prototype.reject=function(){this.result=arguments,this._isdone=!0,this._isfailure=!0;for(var a=0;a<this._errorCallbacks.length;a++)this._errorCallbacks[a].apply(null,arguments);this._errorCallbacks=[]};var d={Promise:b};a.promise=d}(d),function(b){function c(a){var b="";if("string"==typeof a)b=a;else{var c=encodeURIComponent;for(var d in a)a.hasOwnProperty(d)&&(b+="&"+c(d)+"="+c(a[d]))}return b}function d(){var b;if(a.XMLHttpRequest)b=new XMLHttpRequest;else if(a.ActiveXObject)try{b=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){b=new ActiveXObject("Microsoft.XMLHTTP")}return b}function e(a,e,f,g){function h(){k.reject(n.ETIMEOUT,"AJAX:TIMEOUT",i),i.abort()}var i,j,k=new b.promise.Promise;f=f||{},g=g||{};for(var o in l)g[o]=l[o];for(var p in m)f[p]=m[p];try{i=d()}catch(q){return k.reject(n.ENOXHR,"AJAX:ABSENT"),k}j=c(f),"GET"===a&&j&&(e+="?"+j,j=null),i.open(a,e),"POST"===a?i.setRequestHeader("Content-type","application/json"):i.setRequestHeader("Content-type","*/*");for(var r in g)g.hasOwnProperty(r)&&i.setRequestHeader(r,g[r]);var s=n.ajaxTimeout;if(s)var t=setTimeout(h,s);return i.onreadystatechange=function(){if(s&&clearTimeout(t),4===i.readyState){var a=!i.status||(i.status<200||i.status>=300)&&304!==i.status;a?k.reject(i.responseText,i):k.resolve(i.responseText,i)}},i.send(j),k}function f(a){return function(b,c,d){return e(a,b,c,d)}}function g(a){l=a}function h(){return l}function i(a){m=a}function j(){return m}function k(a){"number"==typeof a&&(n.ajaxTimeout=a)}var l={},m={},n={ajax:e,get:f("GET"),post:f("POST"),put:f("PUT"),del:f("DELETE"),ENOXHR:1,ETIMEOUT:2,ajaxTimeout:15e3};b.http={},b.http.ajax=n.ajax,b.http.get=n.get,b.http.post=n.post,b.http.put=n.put,b.http["delete"]=n.del,b.httpGlobal={},b.httpGlobal.setAjaxTimeout=k,b.httpGlobal.getGlobalHeaders=h,b.httpGlobal.setGlobalHeaders=g,b.httpGlobal.getGlobalData=j,b.httpGlobal.setGlobalData=i}(d),function(a){var b=function(a,b){return b.prototype=new a,b};a.extender=b}(d),function(c,d){function e(a,b,c){return{url:b,state:a,component:c}}function g(){return r.currentState.state}function h(){var a=location.pathname.split("#")[0];if("string"==typeof a)return a;if(a.length>0)return a[0];throw new Error("Unable to process route")}function i(a){if(!(a&&a.url&&a.component))throw new Error("Route object should contain a URL regex and a component name");var b=/:([A-Za-z0-9]*)$|:(([A-Za-z0-9]*)\/)/g,c=a.url.match(b),d=a.url;if(c)for(var e=0;e<c.length;e++)c[e]=c[e].replace("/",""),d=d.replace(c[e],"(.*)");a.regex=new RegExp("^"+d+"$","i"),a.paramDictionary=c,r.routes.push(a)}function j(a,b,c){if(!b||0===b.length)return{};var d=c.match(a),e={};d.shift();for(var f=0;f<b.length;f++)e[b[f]]=d[f];return e}function k(){if(0===arguments.length)return r.currentState;if(arguments.length>0&&"string"==typeof arguments[0]){var a=arguments[0],b=h();if(history&&history.pushState){var d=!1;for(var e in r.routes){var f=r.routes[e],g=f.regex;if(g.test(a)&&r.currentState.name!==f.state){f.data=j(g,f.paramDictionary,a);var i={};i.component=f.component,i.data=f.data,i.url=f.url,i.state=f.state,""===r.currentState.name?history.replaceState(i,"",a):(f.prevPage=b,arguments[1]&&"boolean"==typeof arguments[1]&&arguments[1]===!0?history.replaceState(i,"",a):history.pushState(i,"",a)),d=!0,c.Dispatcher.trigger("veronica:stateChange",f);var k="mounting",m="unmount";arguments[1]&&"string"==typeof arguments[1]&&(k=arguments[1]),arguments[2]&&"string"==typeof arguments[2]&&(m=arguments[2]),l(f,k,m);break}}d||(location.href=a)}else a!==b&&(location.href=a)}}function l(a,c,d){if(null!==a){var e=a.component;r.currentState;r.currentState.name=a.state,r.currentState.state=a,r.currentComponent=document.createElement(e),m(c,d);b.mount(e,{})}}function m(a,b){if(a=a||"mounting",b=b||"unmount",r.viewTag)if(r.pageTag.children.length>0){var e=document.createElement("div");if(r.shownEventFired=!1,e.className="page "+r.currentComponent.tagName.toLowerCase(),e.appendChild(r.currentComponent),r.mountingComponent=e,d.settings.enablePageTransitions&&(r.pageTag.addEventListener("webkitTransitionEnd",n),r.pageTag.addEventListener("oTransitionEnd",n),r.pageTag.addEventListener("transitionend",n)),setTimeout(function(){r.shownEventFired||(o(r.pageTag,e),r.currentComponent.dispatchEvent(c.capabilities.createEvent("shown")))},d.settings.maxPageTransitionTime),"A"===f.BROWSER_SUPPORT&&d.settings.enablePageTransitions)e.classList.add(a),r.pageTag.classList.add(b),r.viewTag.appendChild(e);else{var g=r.viewTag.children&&r.viewTag.children[0],h=g&&g.children&&g.children[0];h._tag&&h._tag.isMounted&&h._tag.unmount();var i=r.currentComponent.tagName.toLowerCase(),j="<div class='page "+i+"'><"+i+"></"+i+"></div>";r.viewTag.innerHTML=j}}else r.pageTag.classList.add(r.currentComponent.tagName.toLowerCase()),r.pageTag.appendChild(r.currentComponent),c.Dispatcher.trigger("veronica:stateTransitionComplete",r.currentState.state)}function n(a){this.removeEventListener("transitionend",n),this.removeEventListener("webkitTransitionEnd",n),this.removeEventListener("oTransitionEnd",n),o(this,r.mountingComponent),r.shownEventFired=!0,r.currentComponent.dispatchEvent(c.capabilities.createEvent("shown"))}function o(a,b){a.className="hidden",q(b),b.className="page "+r.currentComponent.tagName.toLowerCase(),r.pageTag=b,c.Dispatcher.trigger("veronica:stateTransitionComplete",r.currentState.state)}function p(){return history.state?history.state.prevPage||null:null}function q(a){for(var b=r.viewTag.childNodes,c=0;b.length>1;){var d=b[c];d.childNodes[0];d!==a?d.remove?d.remove():d.parentElement&&d.parentElement.removeChild(d):c+=1}}var r={shownEventFired:!1,mountingComponent:null};r.viewTag=$(d.settings.viewTag)[0],r.viewTag?(r.viewTag.innerHTML="<div class='page'></div>",r.pageTag=r.viewTag.querySelector(".page")):r.pageTag=null,r.routes=[],r.currentState={name:"",state:{}},r.currentComponent=null,a.addEventListener("popstate",function(a){d.settings.listenPopState&&a&&a.state&&(r.currentState.state.state!==a.state.state&&c.Dispatcher.trigger("veronica:stateChange",a.state),l(a.state,"mounting-pop","unmount-pop"))}),d.createRoute=e,d.getCurrentPath=h,d.getCurrentState=g,d.getPrevPageUrl=p,d.addRoute=i,d.loc=k,c.totalRouteLength=function(){return r.routes.length}}(d,c),function(a,b,c,e){function f(){this.Dispatcher={trigger:c.trigger},this.Ajax=b,this.Promise=e.Promise}var g={};d.flux.Actions={},d.flux.Actions.createAction=function(a,b){try{return g[a]=d.extender(f,b),!0}catch(c){return!1}},d.flux.Actions.getAction=function(a){var b=g[a];return b?new b:null}}(c,d.http,d.Dispatcher,d.promise),function(a,b,c,e){function f(){var a=new c;this.Dispatcher={register:b.on,unregister:b.off,once:b.once},this.subscribe=a.on,this.unsubscribe=a.off,this.Promise=e.Promise,this.emit=function(b){a.trigger(b,{})}}var g={};d.flux.Stores={},d.flux.Stores.createStore=function(a,b){try{var c=d.extender(f,b);return g[a]=new c,!0}catch(e){return!1}},d.flux.Stores.getStore=function(a){return g[a]}}(c,d.Dispatcher,d.PB,d.promise),function(b,c){function d(){b.capabilities.testAnimationCapability()||$("body")[0].classList.add("noanim"),b.capabilities.isBrowserSemiSupported()&&(f.BROWSER_SUPPORT="B",$("body")[0].classList.add("noanim")),b.totalRouteLength()>0&&(c.loc(location.pathname),b.Dispatcher.trigger("veronica:init"),a.dispatchEvent(b.capabilities.createEvent("veronica:init"))),document.addEventListener("click",b.capabilities.handleClick)}document.onreadystatechange=function(){"interactive"==document.readyState&&d()}}(d,c),c.flux=d.flux,c.http=d.httpGlobal,a.veronica=c}(window,riot);